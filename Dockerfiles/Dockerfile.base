# Use the official Rust container based on Debian bookworm
FROM rust:1.74.1-slim-bookworm as base

WORKDIR /usr/src/myapp

# Install dependencies (if any additional dependencies are needed beyond rust)
RUN apt-get update && apt-get install -y make clang libc-dev curl cmake python3 protobuf-compiler pkg-config libssl-dev git wget build-essential && apt-get clean && rm -rf /var/lib/apt/lists/*

# Copy common project files
COPY ./common ./common
COPY ./ai-gateway ./ai-gateway